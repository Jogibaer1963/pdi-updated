<template name="repairView">
    {{#if currentUser}}
        {{> topNav}}
        {{> repairNav}}
        {{> repairMachine}}
    {{else}}
        {{> login}}
    {{/if}}
</template>

<template name="repairNav">
    <div  class="repNav">
        <nav>
            <a class="btn" href="/pdiRepairList">Review Repair List</a>
            <a>|</a>
            <a class="btn" href="/si">SI's or special Item's </a>
        </nav>
    </div>
</template>

<template name="repairMachine">
    <div id="logo">
        <img src="claas_logo.png" />
    </div>
    <div class="repairLoad">
       <h1>Work Load Repair</h1>
          <form class="repairFinnish">
             <button type="submit" class="btn btn-default btn-success repairButton">Repair Complete</button>
             <label for="workingHours"></label>
             <input type="text" class="workingHours" id="workingHours" name="workingHours" placeholder="Machine Hours" required>
          </form>
    </div>
    <div>
        <button type="button" class="btn btn-info toggleRepairUpcoming">Toggle repair / upcoming</button>
    </div>
    <div class="washBayText">
        <div class="washHeader">
            <h4>{{washMachine}}</h4>
        </div>
        <form class="messageToWashBay">
            <input type="text" id="textMessage" name="message" placeholder="Message to WashBay" required>
            <br><br>
            <button class="btn btn-success washBayMessage" type="submit">Submit Message to Wash Bay</button>
        </form>
    </div>
    <div>
        <div class="issueHeader">
            <h4><strong>Issues added subsequent to PDI</strong></h4>
        </div>
        <table class="blueTable issueTable" cellpadding="10">
            <tbody class="newIssueTableHeight">
            {{#each issueAdded}}
                <tr class="addIssueToPdi {{selectedClass3}}">
                    <td class="pdiMachineField ">{{machineId}}</td>
                    <td class="pdiComments">{{newIssues}}</td>
                </tr>
            {{/each}}
            </tbody>
        </table>
        <button type="submit" class="btn btn-info addIssueToList">Change received</button>
    </div>


    <div class="kitListButton">
        <button type="submit" class="btn btn-success addToList">Kit List printed</button>
        <br><br>
        <button type="submit" class="btn btn-danger removeFromList" >Remove Kit List</button>
    </div>
    <div>
      <table class="blueTable repairTable">
        <thead>
           <tr>
              <th class="pdiMachineField"><strong>Machine</strong></th>
              <th class="pdiShipDate"><strong>Ship Date</strong></th>
               <th class="pdiTruckOnOrder"><strong>Truck ordered</strong></th>
               <th class="pdiTruckDate"><strong>Confirmed Ship Date</strong></th>
              <th class="pdiComments"><strong>Comments     // {{choice}}</strong></th>
              <th class="pdiKitField"><strong>Ship with Kit</strong></th>
              <th class="pdiRepField"><strong>Rep</strong></th>
              <th class="pdiWashField"><strong>Wash</strong></th>
              <th class="pdiLocation"><strong>Location</strong></th>
              <th class="pdiKitList"><strong>Kit List printed</strong></th>
           </tr>
        </thead>
        <tbody class="tableHeight">
          {{#each shippList}}
             <tr class="openInspections {{selectedClass2}}">
                <td class="pdiMachineField ">{{machineId}}{{newHeadId}}</td>
                <td class="pdiShipDate">{{date}}</td>
                 <td class="pdiTruckOnOrder {{getStatusTruck truckStatus}}" style="background-color:{{getStatusTruck truckStatus}}; color:{{getStatusTruck truckStatus}}" >{{truckStatus}}</td>
                 <td class="pdiTruckDate truckDateCorrection">{{confirmedShipDate}}</td>
                <td class="pdiComments" style="width: 250px" >{{shippingComment}}</td>
                <td class="pdiKitField">{{kit}}</td>
                <td class="pdiRepField  {{getStatusColor repairStatus}}" style="background-color:{{getStatusColor repairStatus}}; color:{{getStatusColor repairStatus}}" >{{repairStatus}}</td>
                <td class="pdiWashField  {{getStatusColor washStatus}}" style="background-color:{{getStatusColor washStatus}}; color:{{getStatusColor washStatus}}" >{{washStatus}}</td>
                <td class="pdiLocation">{{locationId}}</td>
                <td class="pdiKitList {{getStatusKit KitStatus}}" style="background-color:{{getStatusKit KitStatus}}; color:{{getStatusKit KitStatus}}" >{{KitStatus}}</td>
              </tr>
           {{/each}}
         </tbody>
       </table>
        <div class="repair-print-list">
          <button class="btn btn-warning repairList">Repair List</button>
        </div>
        <div class="repair-user">
            <h3>Repair Tech: {{repairUser}}</h3>
        </div>
        <div class="repair-confirm-input">
            <form class="repairConfirmText">
                <label for="repairComment"> </label>
                <textarea name="message" id="repairComment" cols="30" rows="10" class="confirm-text-area"> </textarea>
                <br><br>
                <button type="submit" class="btn btn-success">Confirm Repair</button>
            </form>
        </div>
    </div>
    <table class="blueTable repair-print-out">
        <thead>
            <tr>
                <th class="repair-comment">Repair Item / Comment</th>
                <th class="pictureWidth">Picture</th>
                <th class="pictureWidth">Repair Confirmed</th>
            </tr>
        </thead>
        <tbody class="repair-pre-view">
            {{#each machineToRepair}}
                <tr class="repairConfirm  {{selectedConfirm}}">
                    <td class="error-description">{{errorDescription}}</td>
                    <td><a target="blank" href={{pictureLocation}}>
                        <img class="image-box" src={{pictureLocation}} alt="noPicture.JPG">
                    </a></td>
                    <td class="pdi-rep-conf  {{getStatusColor repairStatus}}" style="background-color:{{getStatusColor repairStatus}}; color:{{getStatusColor repairStatus}}" >{{repairStatus}}</td>
                </tr>
            {{/each}}
        </tbody>
    </table>
</template>

